{"version":3,"sources":["../src/polymer/polymer2-config.ts"],"names":[],"mappings":";AAAA;;;;;;;;;;;;GAYG;;AAEH,sCAAsC;AAEtC,oDAAoD;AACpD,uDAA0D;AAG1D,6DAAuD;AAGvD,8BACI,IAAkD,EAClD,IAAY;IACd,MAAM,MAAM,GACR,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CACf,CAAC,CAAC,EAAE,EAAE,CAAC,KAAK,CAAC,aAAa,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,MAAM,KAAK,IAAI;QAC9C,CAAC,CAAC,IAAI,KAAK,KAAK,IAAI,6BAAiB,CAAC,CAAC,CAAC,GAAG,CAAC,KAAK,IAAI,CAC5C,CAAC;IACtB,IAAI,CAAC,MAAM,EAAE;QACX,OAAO,SAAS,CAAC;KAClB;IAED,qEAAqE;IACrE,8EAA8E;IAC9E,0EAA0E;IAC1E,MAAM,UAAU,GAAG,MAAM,CAAC,IAAI,CAAC;IAC/B,IAAI,UAAU,CAAC,IAAI,CAAC,MAAM,KAAK,CAAC,EAAE;QAChC,kCAAkC;QAClC,OAAO,SAAS,CAAC;KAClB;IACD,MAAM,SAAS,GAAG,UAAU,CAAC,IAAI,CAAC,CAAC,CAAE,CAAC;IACtC,IAAI,CAAC,KAAK,CAAC,iBAAiB,CAAC,SAAS,CAAC,EAAE;QACvC,qCAAqC;QACrC,OAAO,SAAS,CAAC;KAClB;IAED,OAAO,SAAS,CAAC,QAAQ,CAAC;AAC5B,CAAC;AA3BD,oDA2BC;AAED,oBAA2B,IACqB;IAC9C,MAAM,WAAW,GAAG,oBAAoB,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;IACrD,IAAI,CAAC,WAAW,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,WAAW,CAAC,EAAE;QACjD,2BAA2B;QAC3B,OAAO,SAAS,CAAC;KAClB;IACD,MAAM,KAAK,GAAG,QAAQ,CAAC,iBAAiB,CAAC,WAAW,CAAC,CAAC;IACtD,IAAI,OAAO,KAAK,KAAK,QAAQ,EAAE;QAC7B,OAAO,SAAS,CAAC;KAClB;IACD,OAAO,KAAK,CAAC;AACf,CAAC;AAZD,gCAYC;AAED;;GAEG;AACH,8BACI,IAAgB,EAAE,QAA4B;IAChD,IAAI,CAAC,KAAK,CAAC,kBAAkB,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,iBAAiB,CAAC,IAAI,CAAC,EAAE;QACrE,OAAO,EAAE,CAAC;KACX;IACD,MAAM,cAAc,GAAG,oBAAoB,CAAC,IAAI,EAAE,YAAY,CAAC,CAAC;IAChE,OAAO,cAAc,CAAC,CAAC,CAAC,sCAAiB,CAAC,cAAc,EAAE,QAAQ,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;AAC3E,CAAC;AAPD,oDAOC","file":"polymer2-config.js","sourcesContent":["/**\n * @license\n * Copyright (c) 2016 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n\nimport * as babel from '@babel/types';\n\nimport * as astValue from '../javascript/ast-value';\nimport {getIdentifierName} from '../javascript/ast-value';\nimport {JavaScriptDocument} from '../javascript/javascript-document';\n\nimport {analyzeProperties} from './analyze-properties';\nimport {ScannedPolymerProperty} from './polymer-element';\n\nexport function getStaticGetterValue(\n    node: babel.ClassDeclaration|babel.ClassExpression,\n    name: string): babel.Expression|undefined|null {\n  const getter =\n      node.body.body.find(\n          (n) => babel.isClassMethod(n) && n.static === true &&\n              n.kind === 'get' && getIdentifierName(n.key) === name) as\n      babel.ClassMethod;\n  if (!getter) {\n    return undefined;\n  }\n\n  // TODO(justinfagnani): consider generating warnings for these checks\n  // TODO(usergenic): I'm not sure this conversion below here makes sense...  Do\n  // we semantically want this `getter.body` to replace `getter.value.body`?\n  const getterBody = getter.body;\n  if (getterBody.body.length !== 1) {\n    // not a single statement function\n    return undefined;\n  }\n  const statement = getterBody.body[0]!;\n  if (!babel.isReturnStatement(statement)) {\n    // we only support a return statement\n    return undefined;\n  }\n\n  return statement.argument;\n}\n\nexport function getIsValue(node: babel.ClassDeclaration|\n                           babel.ClassExpression): string|undefined {\n  const getterValue = getStaticGetterValue(node, 'is');\n  if (!getterValue || !babel.isLiteral(getterValue)) {\n    // we only support literals\n    return undefined;\n  }\n  const value = astValue.expressionToValue(getterValue);\n  if (typeof value !== 'string') {\n    return undefined;\n  }\n  return value;\n}\n\n/**\n * Returns the properties defined in a Polymer config object literal.\n */\nexport function getPolymerProperties(\n    node: babel.Node, document: JavaScriptDocument): ScannedPolymerProperty[] {\n  if (!babel.isClassDeclaration(node) && !babel.isClassExpression(node)) {\n    return [];\n  }\n  const propertiesNode = getStaticGetterValue(node, 'properties');\n  return propertiesNode ? analyzeProperties(propertiesNode, document) : [];\n}\n"]}