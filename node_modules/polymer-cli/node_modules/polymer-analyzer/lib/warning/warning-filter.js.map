{"version":3,"sources":["../src/warning/warning-filter.ts"],"names":[],"mappings":";AAAA;;;;;;;;;;;;GAYG;;AAEH,0CAAiD;AAEjD,uCAAwC;AAmBxC;IAKE,YAAY,OAAgB;QAJ5B,yBAAoB,GAAwB,IAAI,GAAG,EAAU,CAAC;QAC9D,oBAAe,GAAG,gBAAQ,CAAC,IAAI,CAAC;QAChC,yBAAoB,GAA8B,EAAE,CAAC;QAGnD,IAAI,OAAO,CAAC,oBAAoB,EAAE;YAChC,IAAI,CAAC,oBAAoB,GAAG,OAAO,CAAC,oBAAoB,CAAC;SAC1D;QACD,IAAI,OAAO,CAAC,eAAe,IAAI,IAAI,EAAE;YACnC,IAAI,CAAC,eAAe,GAAG,OAAO,CAAC,eAAe,CAAC;SAChD;QACD,IAAI,OAAO,CAAC,aAAa,EAAE;YACzB,IAAI,CAAC,oBAAoB;gBACrB,CAAC,OAAO,CAAC,aAAa;oBACrB,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,IAAI,EAAE,EAAE,CAAC,IAAI,SAAS,CAAC,SAAS,CAAC,IAAI,EAAE,EAAE,CAAC,CAAC,CAAC;SAC3D;IACH,CAAC;IAED,YAAY,CAAC,OAAgB;QAC3B,IAAI,IAAI,CAAC,oBAAoB,CAAC,GAAG,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE;YAC/C,OAAO,IAAI,CAAC;SACb;QACD,IAAI,OAAO,CAAC,QAAQ,GAAG,IAAI,CAAC,eAAe,EAAE;YAC3C,OAAO,IAAI,CAAC;SACb;QACD,KAAK,MAAM,IAAI,IAAI,IAAI,CAAC,oBAAoB,EAAE;YAC5C,IAAI,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,WAAW,CAAC,IAAI,CAAC,EAAE;gBACxC,OAAO,IAAI,CAAC;aACb;SACF;QACD,OAAO,KAAK,CAAC;IACf,CAAC;CACF;AAjCD,sCAiCC","file":"warning-filter.js","sourcesContent":["/**\n * @license\n * Copyright (c) 2016 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n\nimport {Severity, Warning} from '../model/model';\n\nimport minimatch = require('minimatch');\nimport {IMinimatch} from 'minimatch';\n\nexport interface Options {\n  /**\n   * Warning codes like 'parse-error' or 'behavior-not-found' to filter out.\n   */\n  warningCodesToIgnore?: ReadonlySet<string>;\n  /**\n   * All warnings below this level of severity will be filtered out.\n   */\n  minimumSeverity: Severity;\n\n  /**\n   * Any file whose URL matches one of these minimatch globs will be ignored.\n   */\n  filesToIgnore?: ReadonlyArray<string>;\n}\n\nexport class WarningFilter {\n  warningCodesToIgnore: ReadonlySet<string> = new Set<string>();\n  minimumSeverity = Severity.INFO;\n  fileGlobsToFilterOut: ReadonlyArray<IMinimatch> = [];\n\n  constructor(options: Options) {\n    if (options.warningCodesToIgnore) {\n      this.warningCodesToIgnore = options.warningCodesToIgnore;\n    }\n    if (options.minimumSeverity != null) {\n      this.minimumSeverity = options.minimumSeverity;\n    }\n    if (options.filesToIgnore) {\n      this.fileGlobsToFilterOut =\n          (options.filesToIgnore ||\n           []).map((glob) => new minimatch.Minimatch(glob, {}));\n    }\n  }\n\n  shouldIgnore(warning: Warning) {\n    if (this.warningCodesToIgnore.has(warning.code)) {\n      return true;\n    }\n    if (warning.severity > this.minimumSeverity) {\n      return true;\n    }\n    for (const glob of this.fileGlobsToFilterOut) {\n      if (glob.match(warning.sourceRange.file)) {\n        return true;\n      }\n    }\n    return false;\n  }\n}\n"]}