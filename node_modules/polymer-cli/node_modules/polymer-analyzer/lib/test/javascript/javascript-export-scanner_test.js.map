{"version":3,"sources":["../src/test/javascript/javascript-export-scanner_test.ts"],"names":[],"mappings":";AAAA;;;;;;;;;;;;GAYG;;;;;;;;;;AAGH,+BAA4B;AAG5B,8CAA6D;AAE7D,KAAK,CAAC,yBAAyB,EAAE,GAAG,EAAE;IACpC,IAAI,QAAkB,CAAC;IACvB,UAAU,CAAC,GAAS,EAAE;QACpB,QAAQ,GAAG,CAAC,MAAM,+BAAkB,CAAC,uBAAU,CAAC,CAAC,CAAC,QAAQ,CAAC;IAC7D,CAAC,CAAA,CAAC,CAAC;IAEH,oBAA0B,QAAgB;;YACxC,MAAM,QAAQ,GAAG,MAAM,QAAQ,CAAC,OAAO,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC;YACpD,MAAM,MAAM,GAAG,QAAQ,CAAC,WAAW,CAAC,QAAQ,CAAC,CAAC;YAC9C,IAAI,CAAC,MAAM,CAAC,UAAU,EAAE;gBACtB,MAAM,IAAI,KAAK,CAAC,wBAAwB,CAAC,CAAC;aAC3C;YACD,aAAM,CAAC,SAAS,CAAC,MAAM,CAAC,KAAK,CAAC,WAAW,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,QAAQ,EAAE,CAAC,EAAE,EAAE,CAAC,CAAC;YAC1E,OAAO,MAAM,CAAC,KAAK,CAAC,WAAW,CAAC,EAAC,IAAI,EAAE,QAAQ,EAAC,CAAC,CAAC;QACpD,CAAC;KAAA;IAED,IAAI,CAAC,iCAAiC,EAAE,GAAS,EAAE;QACjD,MAAM,QAAQ,GAAG,MAAM,UAAU,CAAC,gCAAgC,CAAC,CAAC;QACpE,aAAM,CAAC,SAAS,CAAC,CAAC,GAAG,QAAQ,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,WAAW,CAAC,CAAC,EAAE;YAC7D,CAAC,sBAAsB,CAAC;YACxB,CAAC,SAAS,CAAC;YACX,CAAC,WAAW,CAAC;YACb,CAAC,cAAc,CAAC;YAChB,CAAC,4BAA4B,CAAC;YAC9B,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;YACpB,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;YACf,CAAC,cAAc,CAAC;YAChB,CAAC,WAAW,CAAC;SACd,CAAC,CAAC;IACL,CAAC,CAAA,CAAC,CAAC;IAEH,IAAI,CAAC,4CAA4C,EAAE,GAAS,EAAE;QAC5D,MAAM,QAAQ,GAAG,MAAM,UAAU,CAAC,6BAA6B,CAAC,CAAC;QACjE,sEAAsE;QACtE,oBAAoB;QACpB,aAAM,CAAC,SAAS,CAAC,CAAC,GAAG,QAAQ,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,WAAW,CAAC,CAAC,EAAE,CAAC;gBAC7C,sBAAsB;gBACtB,WAAW;gBACX,cAAc;gBACd,4BAA4B;gBAC5B,GAAG;gBACH,GAAG;gBACH,GAAG;gBACH,GAAG;gBACH,GAAG;gBACH,GAAG;gBACH,GAAG;gBACH,cAAc;gBACd,WAAW;aACZ,CAAC,CAAC,CAAC;IACvB,CAAC,CAAA,CAAC,CAAC;AACL,CAAC,CAAC,CAAC","file":"javascript-export-scanner_test.js","sourcesContent":["/**\n * @license\n * Copyright (c) 2018 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n\n\nimport {assert} from 'chai';\n\nimport {Analyzer} from '../../core/analyzer';\nimport {createForDirectory, fixtureDir} from '../test-utils';\n\nsuite('JavaScriptExportScanner', () => {\n  let analyzer: Analyzer;\n  suiteSetup(async () => {\n    analyzer = (await createForDirectory(fixtureDir)).analyzer;\n  });\n\n  async function getExports(filename: string) {\n    const analysis = await analyzer.analyze([filename]);\n    const result = analysis.getDocument(filename);\n    if (!result.successful) {\n      throw new Error('could not get document');\n    }\n    assert.deepEqual(result.value.getWarnings().map((w) => w.toString()), []);\n    return result.value.getFeatures({kind: 'export'});\n  }\n\n  test('identifies the names of exports', async () => {\n    const features = await getExports('javascript/all-export-types.js');\n    assert.deepEqual([...features].map((f) => [...f.identifiers]), [\n      ['namedConstIdentifier'],\n      ['default'],\n      ['ClassName'],\n      ['functionName'],\n      ['identifierAssignedFunction'],\n      ['a', 'b', 'c', 'd'],\n      ['g', 'i', 'k'],\n      ['anotherValue'],\n      ['someValue']\n    ]);\n  });\n\n  test('re-exports across multiple files correctly', async () => {\n    const features = await getExports('javascript/re-export-all.js');\n    // Like the list above, but flattened as they're all exported from one\n    // export statement.\n    assert.deepEqual([...features].map((f) => [...f.identifiers]), [[\n                       'namedConstIdentifier',\n                       'ClassName',\n                       'functionName',\n                       'identifierAssignedFunction',\n                       'a',\n                       'b',\n                       'c',\n                       'd',\n                       'g',\n                       'i',\n                       'k',\n                       'anotherValue',\n                       'someValue'\n                     ]]);\n  });\n});\n"]}